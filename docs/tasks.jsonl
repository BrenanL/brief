{"id":"ag-72f8","status":"done","title":"P0-1: Cache Reset Command","description":"[AGENT] Can be completed independently.\n\n**Problem**: During development, we frequently need to clear and regenerate Brief's cache files (manifest, relationships, etc.) when we change how they work. However, we don't want to lose LLM-generated content (descriptions, summaries) because they cost money and time to regenerate.\n\n**Implementation**:\n- Create `brief reset` or `brief cache clear` command\n- Must delete: manifest files, relationship files, analysis cache\n- Must preserve: `.brief/context/files/` (LLM descriptions), any summaries\n- Decision needed: embeddings.db - generated locally but takes time. Preserve by default, `--include-embeddings` flag to also clear them\n- Add `--full` flag that clears everything including LLM content (with confirmation prompt)\n- Document what gets cleared vs preserved in help text\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":100,"tags":["P0","AGENT","infrastructure"],"created":"2026-01-23T11:15:22.546195","started":"2026-01-23T13:59:20.332217","completed":"2026-01-23T14:01:11.482340","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-bd7f","status":"done","title":"P0-2: Development Logging for Brief Commands","description":"[AGENT] Can be completed independently.\n\n**Problem**: We need to see when agents call Brief commands to verify our prompting and hooks are working. During this session where agents implement these tasks, we want to capture data on whether they actually used Brief.\n\n**Implementation**:\n- Add logging infrastructure that records when `brief context get`, `brief task`, etc. are called\n- Log location: configurable via config, default to `.brief-logs/` (NOT inside .brief/ so logs survive directory resets)\n- Log format: timestamp, command, arguments, any relevant context\n- Make logging toggleable via config: `\"command_logging\": true` (default: true during dev)\n- Create `.brief-logs/` directory on first log write\n- Consider log rotation or max file size\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":100,"tags":["P0","AGENT","infrastructure"],"created":"2026-01-23T11:15:33.352486","started":"2026-01-23T14:01:17.259648","completed":"2026-01-23T14:02:53.269518","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-b706","status":"done","title":"P0-3: Verify Hook and Prompting Effectiveness","description":"[COLLAB] Requires human collaboration - agent cannot fully debug its own hooks.\n\n**Problem**: Not convinced the prompting and hooks are sufficient to constrain/encourage Brief usage. The pre-tool call hook may not actually be going to the agent, and instead just to the UI of Claude Code. Need to verify this works.\n\n**Implementation**:\n- Test the current hook setup manually - does the warning appear? Does the agent see it?\n- Check if `PreToolUse` hooks in `.claude/settings.json` actually reach the agent's context\n- Review logs from P0-2 to see if agents are using Brief commands\n- If hooks don't work as expected, investigate alternatives\n- Document findings and adjust hook strategy accordingly\n\n**Dependencies**: P0-2 (Logging) helps verify this","depends":[],"blocks":[],"priority":100,"tags":["P0","COLLAB","infrastructure"],"created":"2026-01-23T11:15:46.111165","started":"2026-01-23T14:02:59.403207","completed":"2026-01-23T14:03:33.839900","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-3e90","status":"done","title":"P1-1: Auto-Generate Descriptions by Default","description":"[AGENT] Can be completed independently.\n\n**Problem**: Currently you must pass `-g` flag to `brief context get` to auto-generate missing descriptions. It's unreasonable to have to remember to type in flags each time if you want fresh context. Default should be yes, generate.\n\n**Implementation**:\n- Add config option in `.brief/config.json`: `\"auto_generate_descriptions\": true` (default: true)\n- Modify `get_file_description()` in context.py to check this config\n- The `-g` / `--auto-generate` flag still exists to override config\n- Add `-G` / `--no-auto-generate` flag to disable when config is true\n- When auto-generating, show indication that generation is happening (not silent)\n- Seamlessly generate descriptions on first use if they don't exist\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:15:56.862678","started":"2026-01-23T14:03:39.916381","completed":"2026-01-23T14:05:23.445223","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-989a","status":"done","title":"P1-2: LLM Unavailable Handling and Placeholder Quality","description":"[AGENT] Can be completed independently.\n\n**Problem**: There's no indication when LLM is not available. Also, placeholders might be harmful - \"insert description here\" style text would hurt context quality. Better to show function names/signatures than garbage placeholders.\n\n**Implementation**:\n- Audit what happens when BAML/LLM is not configured - what do we currently return?\n- If returning bad placeholders, change to return signatures/function names instead (useful info)\n- Add clear warning when LLM is unavailable: \"LLM not configured - descriptions will show signatures only\"\n- On first `brief context get` with no LLM and no descriptions, tell user how to set up LLM\n- Never return placeholder text that looks like a description but isn't\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:16:07.842368","started":"2026-01-23T14:05:30.743014","completed":"2026-01-23T14:06:30.621785","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-3b8b","status":"done","title":"P1-3: Batch Describe Source Priority","description":"[AGENT] Can be completed independently.\n\n**Problem**: `brief describe batch` generates descriptions for test files first, which feels wrong since people care about source files more. Need better ordering.\n\n**Implementation**:\n- Modify `describe batch` to check if `src/` directory exists\n- If `src/` exists, process files in `src/` first before other directories\n- Simple heuristic: prioritize common source directories (src/, lib/, app/) over test directories\n- This is a quick fix for better vibes - more sophisticated conditional generation is deferred\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:16:16.816133","started":"2026-01-23T14:06:37.160023","completed":"2026-01-23T14:07:18.439159","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-14c1","status":"done","title":"P1-4: Signature vs Description Redundancy","description":"[AGENT] Can be completed independently.\n\n**Problem**: Context packages may return both the LLM description AND function signatures. This is too verbose. Preference: show signatures if no description exists, but not both.\n\n**Implementation**:\n- In `ContextPackage.to_markdown()` or wherever output is formatted\n- Logic: if description exists → show description only; if no description → show signatures\n- Add `--show-signatures` flag to force signatures even when descriptions exist\n- Review current output format and trim redundancy\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:16:25.708712","started":"2026-01-23T14:07:18.656117","completed":"2026-01-23T14:08:04.644135","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-ef83","status":"done","title":"P1-5: Memory Command Rename","description":"[AGENT] Can be completed independently.\n\n**Problem**: `brief memory remember <key> <value>` and `brief memory recall <key>` are cumbersome. Want simpler names and top-level aliases.\n\n**Implementation**:\n- Rename commands in `src/brief/commands/memory.py`:\n  - `remember` → `add`\n  - `recall` → `get`\n- Add top-level aliases in `cli.py`:\n  - `brief remember <key> <value>` works (routes to `memory add`)\n  - `brief recall <key>` works (routes to `memory get`)\n- Update all help text\n- No backwards compatibility needed - project is new\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:16:33.971349","started":"2026-01-23T14:08:04.812180","completed":"2026-01-23T14:09:01.683807","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-60c0","status":"done","title":"P1-6: Default Brief Behavior (Shortcut for context get)","description":"[AGENT] Can be completed independently.\n\n**Problem**: Want `brief \"add logging to execution tracing\"` to be a shortcut for `brief context get \"add logging...\"`. Running brief with just a query string should get a context package by default.\n\n**Implementation**:\n- Modify CLI entry point in `cli.py`\n- If first argument is not a known command but looks like a query string, route to `context get`\n- `brief <query>` → `brief context get <query>`\n- Handle edge cases: what if query matches a command name? (probably fine - commands don't have spaces)\n- This is the default behavior; can be changed via config later if needed\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":80,"tags":["P1","AGENT","core"],"created":"2026-01-23T11:16:44.841400","started":"2026-01-23T14:09:01.849303","completed":"2026-01-23T14:10:46.062232","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-e323","status":"done","title":"P2-1: Help Message Quality Pass","description":"[AGENT] Can be completed independently.\n\n**Problem**: The help messages from `brief trace` commands are great. Other commands need to be brought up to the same quality level.\n\n**Implementation**:\n- Review help text for every command in Brief\n- Use `brief trace` commands as the quality bar\n- Each command should explain: what it does, when to use it, example usage\n- Fix any commands with minimal or unclear help\n- Documentation/polish pass across all command modules\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":60,"tags":["P2","AGENT","polish"],"created":"2026-01-23T11:16:53.780824","started":"2026-01-23T14:10:53.753023","completed":"2026-01-23T14:12:29.040339","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-f0f7","status":"done","title":"P2-2: Fix brief overview Command","description":"[COLLAB] Agent will come up with its own idea first and complete the work, then we can modify this later.\n\n**Problem**: `brief overview` is \"pretty bad, very unreadable and not good looking.\" Also unclear what it's even trying to communicate.\n\n**Implementation**:\n- First: decide what `brief overview` SHOULD do (high-level codebase summary? file listing? something else?)\n- Consider: is this redundant with `brief status`? Should it be removed or merged?\n- Redesign the output to be readable and useful\n- Use rich formatting (tables, colors) like `brief status` does\n\n**Dependencies**: Human decision on purpose (but agent should propose a design first)","depends":[],"blocks":[],"priority":60,"tags":["P2","COLLAB","polish"],"created":"2026-01-23T11:17:03.732832","started":"2026-01-23T14:12:29.324551","completed":"2026-01-23T14:15:10.678886","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-5cc4","status":"done","title":"P2-3: Setup Wizard","description":"[COLLAB] Agent will come up with its own idea first and complete the work, then we can modify this later.\n\n**Problem**: First-time users don't know about concepts like file descriptions or how to configure Brief. Want a setup wizard that asks questions and configures appropriately.\n\n**Implementation**:\n- Create `brief setup` command\n- Interactive prompts asking:\n  - \"Do you want to generate file descriptions automatically?\" → sets `auto_generate_descriptions`\n  - \"Which LLM provider?\" → configures BAML/model settings\n  - Other relevant settings TBD\n- After questions, runs necessary commands (`brief init`, `brief analyze all`, maybe initial `describe batch`)\n- Shows what was configured and next steps\n\n**Dependencies**: P1-1 (Auto-generate config) should exist first","depends":[],"blocks":[],"priority":60,"tags":["P2","COLLAB","polish"],"created":"2026-01-23T11:17:13.698807","started":"2026-01-23T14:31:05.043479","completed":"2026-01-23T14:33:03.200688","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-8f3f","status":"done","title":"P2-4: Date/Time Format Exclusions in Config","description":"[AGENT] Can be completed independently.\n\n**Problem**: Doc exclude config currently handles YYYY-MM-DD format for date-based files. What about other date/time formats (MM-DD-YYYY, YYYYMMDD, etc.)?\n\n**Implementation**:\n- Review current exclude pattern logic in config\n- Add support for additional common date formats\n- Consider: regex-based exclude patterns for more flexibility\n- Document supported formats in help/config\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":60,"tags":["P2","AGENT","polish"],"created":"2026-01-23T11:17:22.128753","started":"2026-01-23T14:33:09.967530","completed":"2026-01-23T14:34:28.118749","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-4043","status":"done","title":"P2-5: Task System Disable Mode","description":"[AGENT] Can be completed independently.\n\n**Problem**: Some users might want to use alternative task systems like \"beads\" instead of Brief's built-in tasks. Having both active causes confusion.\n\n**Implementation**:\n- Add config option: `\"enable_tasks\": true` (default: true)\n- When false, `brief task` commands either warn or are hidden\n- Brief still works for context/analysis, just task management is disabled\n- Document how to disable and use alternatives\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":60,"tags":["P2","AGENT","polish"],"created":"2026-01-23T11:17:30.917828","started":"2026-01-23T14:34:34.523951","completed":"2026-01-23T14:37:10.518815","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-7e19","status":"done","title":"P2-6: Add Gemini as LLM Provider via BAML","description":"[AGENT] Can be completed independently.\n\n**Problem**: Want to add Google Gemini as a provider option for description generation. This enables side-by-side quality testing across providers.\n\n**Implementation**:\n- Gemini should already be supported by BAML - verify this\n- Integrate Gemini as an option within existing BAML infrastructure (not a separate pipeline)\n- Add config option to select provider: `\"llm_provider\": \"openai\" | \"gemini\" | \"anthropic\"`\n- Add config option for model: `\"llm_model\": \"<model-name>\"`\n- Test that descriptions generate correctly with Gemini\n- Document how to switch providers in config\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":60,"tags":["P2","AGENT","polish"],"created":"2026-01-23T11:17:40.888636","started":"2026-01-23T14:37:17.600742","completed":"2026-01-23T14:38:45.180427","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-ce98","status":"done","title":"P2-7: Description Prompt Optimization","description":"[COLLAB] Agent will come up with its own idea first and complete the work, then we can modify this later.\n\n**Problem**: Need a test pass on prompting for description generation. Questions: should prompts be conditional by filetype? What provides best BLUF and agent steering?\n\n**Implementation**:\n- Review current description generation prompts in generation module\n- Test with different file types (models vs CLI vs tests vs utils)\n- Consider conditional prompts: different prompt for different file types\n- Optimize for BLUF (Bottom Line Up Front) - most important info first\n- Document prompt strategy\n- A/B testing across providers helps\n\n**Dependencies**: P2-6 (Gemini) helpful for comparison testing","depends":[],"blocks":[],"priority":60,"tags":["P2","COLLAB","polish"],"created":"2026-01-23T11:17:51.150927","started":"2026-01-23T14:38:53.551977","completed":"2026-01-23T14:39:59.532742","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-d204","status":"done","title":"P3-1: Embeddings Architecture Documentation","description":"[COLLAB] Research task requiring human decisions.\n\n**Problem**: The relationship between `embeddings.db` and `.brief/context/files/` and when they are used is not fully clear. Need analysis of how they're both currently used and how we should best use them.\n\n**Implementation**:\n- Trace through code to document when embeddings.db is read/written\n- Trace through code to document when context/files/ is read/written\n- Document the current architecture\n- Identify gaps or inefficiencies\n- Propose improvements if any\n- Research first, implementation second\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":40,"tags":["P3","COLLAB","research"],"created":"2026-01-23T11:18:01.559564","started":"2026-01-23T14:40:06.994271","completed":"2026-01-23T14:41:01.589036","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-853b","status":"done","title":"P3-2: Embeddings Generation UX","description":"[COLLAB] Research task requiring human decisions.\n\n**Problem**: How are embeddings actually generated? What command does it? How do we make this feel better or be easier to use?\n\n**Implementation**:\n- Document current embedding generation flow\n- Identify UX pain points\n- Consider: should embeddings auto-generate like descriptions can?\n- Make the process clearer to users\n\n**Dependencies**: P3-1 (Embeddings architecture) should come first","depends":[],"blocks":[],"priority":40,"tags":["P3","COLLAB","research"],"created":"2026-01-23T11:18:09.196232","started":"2026-01-23T14:41:08.984832","completed":"2026-01-23T14:42:21.287564","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-8d30","status":"done","title":"P3-3: Context Package Ruleset Definition","description":"[COLLAB] Research task requiring human design decisions.\n\n**Problem**: Many open questions about context package generation:\n- How many files to return? Fixed limit or variable based on query?\n- What embedding proximity threshold is relevant?\n- Should we refine search terms before embedding search (generate multiple query variations)?\n- How to verify execution pipelines we return are correct?\n- What exactly are we returning - is it important/necessary?\n- What are we NOT returning that we should?\n- What context package features are not yet implemented?\n- Should we add BLUF summary at top of context package?\n- Should we add an index of what's in the package?\n\n**Implementation**:\n- Needs design decisions first\n- Then implement chosen rules\n- Make rules configurable eventually\n- Document the ruleset\n\n**Dependencies**: Human design input required","depends":[],"blocks":[],"priority":40,"tags":["P3","COLLAB","research"],"created":"2026-01-23T11:18:20.848646","started":"2026-01-23T14:42:28.123213","completed":"2026-01-23T14:43:23.142243","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-8e05","status":"done","title":"P4-1: brief config show Command","description":"[AGENT] Can be completed independently.\n\n**Problem**: No easy way to see current Brief configuration clearly.\n\n**Implementation**:\n- Create `brief config show` command\n- Display all current config values in a readable format\n- Show defaults vs overridden values\n- Include file path locations\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":20,"tags":["P4","AGENT","dashboard"],"created":"2026-01-23T11:18:27.809312","started":"2026-01-23T14:15:19.854243","completed":"2026-01-23T14:16:05.230739","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-bfbf","status":"done","title":"P4-2: Token Counting for Context Packages","description":"[AGENT] Can be completed independently.\n\n**Problem**: Want to know how many tokens a context package contains for understanding context window usage.\n\n**Implementation**:\n- Add token counting utility (use tiktoken or similar)\n- Show token count in `brief context get` output\n- Maybe breakdown by section (files, descriptions, traces, etc.)\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":20,"tags":["P4","AGENT","dashboard"],"created":"2026-01-23T11:18:34.828781","started":"2026-01-23T14:28:57.011575","completed":"2026-01-23T14:30:57.009037","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-a7e2","status":"done","title":"P4-3: Compact Summary Mode for Context Get","description":"[AGENT] Can be completed independently.\n\n**Problem**: Sometimes you just want the file list and stats, not full descriptions.\n\n**Implementation**:\n- Add `--compact` or `--summary` flag to `brief context get`\n- Shows: file paths, maybe one-line summaries, stats\n- Skips full descriptions and code snippets\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":20,"tags":["P4","AGENT","dashboard"],"created":"2026-01-23T11:18:42.064066","started":"2026-01-23T14:26:56.874310","completed":"2026-01-23T14:28:56.654089","notes":[],"steps":[],"current_step_id":null}
{"id":"ag-3240","status":"done","title":"P4-4: brief coverage --detailed","description":"[AGENT] Can be completed independently.\n\n**Problem**: Want breakdown of coverage by directory.\n\n**Implementation**:\n- Add `--detailed` flag to coverage command\n- Show per-directory stats for descriptions, analysis, etc.\n\n**Dependencies**: None","depends":[],"blocks":[],"priority":20,"tags":["P4","AGENT","dashboard"],"created":"2026-01-23T11:18:49.605301","started":"2026-01-23T14:16:05.535570","completed":"2026-01-23T14:17:21.320596","notes":[],"steps":[],"current_step_id":null}
